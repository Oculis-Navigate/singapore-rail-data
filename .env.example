# =============================================================================
# MRT Data Pipeline - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your API keys
#
# Required keys are marked with REQUIRED
# Optional keys have default values shown
# =============================================================================

# -----------------------------------------------------------------------------
# 1. OneMap API (REQUIRED for Stage 1)
# -----------------------------------------------------------------------------
# Singapore's official map API for station coordinates and exit locations
# Get your API key from: https://www.onemap.gov.sg/
# Sign up for a free account, then go to "Developer Tools" > "API Key"
#
# Note: OneMap API is free and doesn't require payment for basic usage
ONEMAP_API_KEY=your_onemap_api_key_here

# -----------------------------------------------------------------------------
# 2. OpenRouter API (REQUIRED for Stage 2 - Enrichment)
# -----------------------------------------------------------------------------
# Used for LLM-based extraction of platform info, accessibility, bus stops
# Get your API key from: https://openrouter.ai/
#
# Steps:
# 1. Go to https://openrouter.ai/
# 2. Sign up (GitHub or Google)
# 3. Go to "Keys" in the sidebar
# 4. Create a new key
# 5. Copy it here
#
# Free tier includes:
# - GPT-3.5, Claude models available
# - Rate limits apply (check OpenRouter docs)
OPENROUTER_API_KEY=your_openrouter_api_key_here

# -----------------------------------------------------------------------------
# 3. Data.gov.sg (ALREADY CONFIGURED - No key needed)
# -----------------------------------------------------------------------------
# Singapore's open data portal - free and open access
EXIT_DATA_URL=https://data.gov.sg/api/action/datastore_search?resource_id=d_b39d3a0871985372d7e1637193335da5

# -----------------------------------------------------------------------------
# Optional Configuration
# -----------------------------------------------------------------------------

# Pipeline mode
# Set to "true" when running tests (auto-set by pytest)
TESTING=

# Custom config path (optional)
# PIPELINE_CONFIG=config/pipeline.yaml

# -----------------------------------------------------------------------------
# API Rate Limiting Notes
# -----------------------------------------------------------------------------
# OneMap: ~1000 requests/day free, 60 requests/minute
# OpenRouter: Varies by model, check OpenRouter dashboard
#
# The pipeline includes automatic rate limiting:
# - Stage 1: Built-in delay between API calls
# - Stage 2: 2-second delay between LLM requests
#
# If you hit rate limits:
# - Stage 1: Increase cache_ttl_days in config/pipeline.yaml
# - Stage 2: Increase delay_seconds or reduce batch_size
# -----------------------------------------------------------------------------
